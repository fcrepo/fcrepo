<infinispan xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns="urn:infinispan:config:7.2"
            xmlns:store="urn:infinispan:config:store:leveldb:7.2"
            xsi:schemaLocation="urn:infinispan:config:7.2 http://www.infinispan.org/schemas/infinispan-config-7.2.xsd urn:infinispan:config:store:leveldb:7.2 http://infinispan.org/schemas/infinispan-cachestore-leveldb-config-7.2.xsd">

  <cache-container default-cache="FedoraRepository" statistics="true">
    <jmx duplicate-domains="true"/>

    <local-cache name="FedoraRepository">

      <transaction transaction-manager-lookup="org.infinispan.transaction.lookup.GenericTransactionManagerLookup" mode="NON_XA" locking="PESSIMISTIC"/>
      <eviction max-entries="500" strategy="LIRS" thread-policy="DEFAULT"/>
      <persistence>
        <store:leveldb-store passivation="false" path="${fcrepo.ispn.repo.cache:target/repo}/data">
          <store:expiration path="${fcrepo.ispn.repo.cache:target/repo}/expired"/>
          <store:implementation type="JAVA"/>
        </store:leveldb-store>

      </persistence>
    </local-cache>

    <local-cache name="FedoraRepositoryMetaData">

      <transaction transaction-manager-lookup="org.infinispan.transaction.lookup.GenericTransactionManagerLookup" mode="NON_XA" locking="PESSIMISTIC"/>
      <eviction max-entries="500" strategy="LIRS" thread-policy="DEFAULT"/>
      <persistence>
        <store:leveldb-store passivation="false" path="${fcrepo.ispn.cache:target}/data">
          <store:expiration path="${fcrepo.ispn.cache:target}/expired"/>
          <store:implementation type="JAVA"/>
        </store:leveldb-store>

      </persistence>
    </local-cache>

    <local-cache name="FedoraRepositoryBinaryData">

      <transaction transaction-manager-lookup="org.infinispan.transaction.lookup.GenericTransactionManagerLookup" mode="NON_XA" locking="PESSIMISTIC"/>
      <eviction max-entries="100" strategy="LIRS" thread-policy="DEFAULT"/>
      <persistence>
        <file-store shared="false"
                    preload="false"
                    fetch-state="true"
                    purge="false"
                    path="${fcrepo.ispn.binary.cache:target/FedoraRepositoryBinaryData/storage}"/>
      </persistence>
    </local-cache>

  </cache-container>

</infinispan>
